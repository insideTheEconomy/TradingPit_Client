// Make code portable to Node.js without any changes
try{var autobahn=require("autobahn")}catch(e){}var sess,connection=new autobahn.Connection({url:"ws://capricorn.local:8080/ws",realm:"tradingpit"});connection.onopen=function(e){function n(e,t,n){console.log("Tick",e,t,n);$("#time").html(t.minutes+":"+t.seconds)}function r(e,t,n){console.log(t);$.get("offer_template.html",function(e){Mustache.parse(e);var n=Mustache.render(e,t);$(".flex-offers").html(n)})}sess=e;var t=null;sess.call("org.pit.signin",[],{name:"QT",position:0,role:"seller",id:sess.id,meat:"true"}).then(function(e){console.log("success");console.log(e)});e.subscribe("org.pit.offers",r).then(function(e){t=e},function(e){});e.subscribe("org.pit.clock",n).then(function(e){t=e},function(e){})};connection.open();