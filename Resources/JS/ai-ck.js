var aiwamp=function(e){try{var t=e}catch(n){console.log("AIWamp Behavior E: ",n);var t="profit"}var r=function(){if(self.params.isRound){var e=self.params.changeCounter,t=self.params.changeTime;if(e==t){self.params.changeCounter=0;return!0}self.params.changeCounter+=1;return!1}return!1},i=function(){var e=self.params.card.reserve,t=self.params.window,n=self.params.direction,r=self.params.offer;r.price=Math.min(e+~~(Math.random()*t)*n,10);console.log("AI MAKE OFFER",r);self.sess.call("pit.rpc.offer",[],{id:self.sess.id,offer:r}).then(function(e){console.log("MADE OFFER",e)})};AIs={profit:{},transaction:{}};var s=~~(Math.random()*5)+4;AIs.profit.params={card:null,rolls:0,chance:aiChance,threshold:1,window:3,changeTime:s,changeCounter:s};AIs.profit.methods={test:function(){alert("I'm a profit  AI!")},onCard:function(e,t,n){console.log("CARD",t);self.params.card=t;i()},onTick:function(e,t,n){function s(){return~~(Math.random()*self.params.chance)<self.params.threshold}function o(){console.log("Attempting to find acceptable offer",self.params.offers,role);var e;if(role=="seller"){console.log("I'm a ",role);e=self.params.offers.buyer.filter(function(e){return e!=null}).sort(function(e,t){return e.price+t.price})[0]}else{console.log("I'm a",role);e=self.params.offers.seller.filter(function(e){return e!=null}).sort(function(e,t){return e.price-t.price})[0]}console.log("ACCEPT OFFER",e,self.params.card.reserve);var t=self.params.compare(e.price,self.params.card.reserve);console.log("PRICE CHECK",t,e.price,self.params.card.reserve);if(t){console.log("Attempting to accept offer");self.sess.call("pit.rpc.accept",[],{id:self.sess.id,offer:e}).then(function(e){console.log("successful accept ",e)},function(e){console.log("Error: ",e)})}}r()&&i();curScreen==0||curScreen==2||curScreen==4?$(".idletime").html(t.until_round.minutes+":"+t.until_round.seconds):curScreen==3?$("#time").html(t.end_of_phase.minutes+":"+t.end_of_phase.seconds):curScreen==5&&$("#tut-time").html(t.until_round.minutes+":"+t.until_round.seconds);var u=self.params.isRound?s():!1;u&&o();self.params.threshold=self.params.threshold>=chance?1:self.params.threshold+1},onOffer:function(e,t,n){console.log("OFFERS received",t);self.params.offers=t},rpcCall:function(e){if(e=="signinAI"){console.log("AI Signin Attempt");self.sess.call("pit.rpc.signin",[],{id:self.sess.id,player:{role:role,position:position,id:self.sess.id,meat:!1,name:"AI"+String(position)}}).then(function(e){console.log("SIGNED IN",e);self.params.foo="bar";self.params.direction=role=="seller"?1:-1;self.params.compare=role=="seller"?function(e,t){return e>t}:function(e,t){return e<t};self.sess.call("pit.rpc.offerTemplate").then(function(e){console.log("Got Offer Template",e);self.params.offer=e})},function(e){console.log("signin error: ",e)});self.sess.call("pit.rpc.offerTemplate").then(function(e){self.params.offer=e})}},onPhase:function(e,t,n){var r={enter:{},exit:{}};r.enter.Signin=function(){setTimeout(switchWAMP,100)};r.enter.Setup=function(){curPhase=0;if(name!="null"){curScreen=5;changeScreen()}};r.enter.Round=function(){self.params.isRound=!0;curPhase=1};r.exit.Round=function(){self.params.isRound=!1;bIdling=!1;clearInterval(idleInterval);checkedIn=!1};r[t.action][t.name]&&console.log("calling phase function",r[t.action][t.name]);r[t.action][t.name]()}};this.wampMethods=AIs[t].methods;this.wamp=new WAMP(this);this.wamp.params=AIs[t].params};