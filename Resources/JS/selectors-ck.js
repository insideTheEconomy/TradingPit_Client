var lettersTyped;$(function(){if(!initiated){console.log("Init");initHTML=$(document.body).html();initiated=!0;changeScreen();lettersTyped=0}offerPrice=1});var stampAnim=function(){$("#stamp").tween({fontSize:{start:125,stop:52,time:0,duration:.25,units:"px",effect:"easeIn"},opacity:{start:0,stop:100,time:0,duration:.25,effect:"easeIn"},onStop:function(e){$("#stamp").tween({opacity:{start:100,stop:0,time:1,duration:.5,effect:"easeOut"}}).play()}}).play()},changeScreen=function(){$(document.body).empty();curScreen==0?role=="buyer"?$(document.body).load("buyer-idle.html",function(){bindArrows();name=="null"?$(".accept").removeClass("greyed"):$(".accept").addClass("greyed")}):role=="seller"&&$(document.body).load("seller-idle.html",function(){bindArrows()}):curScreen==1?role=="buyer"?$(document.body).load("buyer-signin.html",function(){bindArrows()}):role=="seller"&&$(document.body).load("seller-signin.html",function(){bindArrows()}):curScreen==2?role=="buyer"?$(document.body).load("buyer-wait.html",function(){bindArrows()}):role=="seller"&&$(document.body).load("seller-wait.html",function(){bindArrows()}):curScreen==3&&(role=="buyer"?$(document.body).load("buyer.html",function(){$(".namehere").prepend(name);$(".value").html(reserve);bindArrows()}):role=="seller"&&$(document.body).load("seller.html",function(){$(".namehere").prepend(name);$(".value").html(reserve);bindArrows()}))},bindArrows=function(){if(curScreen==0)$(".accept").on("click",function(){curScreen=1;changeScreen()});else if(curScreen==1){console.log("Bind Keyboard");$(".key").on("click",function(){var e=$(this).text();typeLetter(e)})}else if(curScreen==3){$(".up-arrow").on("click",function(){offerPrice++;$("#price").html(offerPrice);$(".greyed").removeClass("greyed").html("Update Offer")});$(".down-arrow").on("click",function(){if(offerPrice>1){offerPrice--;$("#price").html(offerPrice);$(".greyed").removeClass("greyed").html("Update Offer")}});$(".accept").on("click",function(){console.log("Submit Offer @ ",offerPrice);$(this).addClass("greyed").html("Submitted");w.wampMethods.submitOffer(offerPrice)})}},typeLetter=function(e){if(e.length==1&&lettersTyped<3){if(lettersTyped==0){$("h1.signin").html($("h1.signin").text().slice(0,-3));$("h1.signin").append(e+"__");lettersTyped++}else if(lettersTyped==1){$("h1.signin").html($("h1.signin").text().slice(0,-2));$("h1.signin").append(e+"_");lettersTyped++}else if(lettersTyped==2){$("h1.signin").html($("h1.signin").text().slice(0,-1));$("h1.signin").append(e);lettersTyped++}}else if(e=="delete")if(lettersTyped==3){$("h1.signin").html($("h1.signin").text().slice(0,-1));$("h1.signin").append("_");lettersTyped--}else if(lettersTyped==2){$("h1.signin").html($("h1.signin").text().slice(0,-2));$("h1.signin").append("__");lettersTyped--}else if(lettersTyped==1){$("h1.signin").html($("h1.signin").text().slice(0,-3));$("h1.signin").append("___");lettersTyped--}else lettersTyped==0&&(lettersTyped=0);else if(e=="Submit")if(lettersTyped==0)console.log("Don't leave it blank!");else{lettersTyped==3?name=$("h1.signin").text():lettersTyped==2?name=$("h1.signin").text().slice(0,-1):lettersTyped==1&&(name=$("h1.signin").text().slice(0,-2));console.log("Name=",name);curScreen=2;changeScreen();if(phase==0){console.log("RPC Signin CALL");w.wampMethods.rpcCall("signin")}}};