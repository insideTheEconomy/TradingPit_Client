var lettersTyped;$(function(){if(!initiated){console.log("Init");initHTML=$(document.body).html();initiated=!0;changeScreen();lettersTyped=0}offerPrice=1});var changeScreen=function(){$(document.body).empty();curScreen==0?role=="buyer"?$(document.body).load("buyer-idle.html",function(){bindArrows();name=="null"?$(".accept").removeClass("greyed"):$(".accept").addClass("greyed")}):role=="seller"&&$(document.body).load("seller-idle.html",function(){bindArrows()}):curScreen==1?role=="buyer"?$(document.body).load("buyer-signin.html",function(){bindArrows()}):role=="seller"&&$(document.body).load("seller-signin.html",function(){bindArrows()}):curScreen==2&&(role=="buyer"?$(document.body).load("buyer.html",function(){$(".namehere").prepend(name);bindArrows();w.wampMethods.rpcCall("signin")}):role=="seller"&&$(document.body).load("seller.html",function(){$(".namehere").prepend(name);bindArrows();w.wampMethods.rpcCall("signin")}))},bindArrows=function(){if(curScreen==0)$(".accept").on("click",function(){curScreen=1;changeScreen()});else if(curScreen==1){console.log("Bind Keyboard");$(".key").on("click",function(){var e=$(this).text();typeLetter(e)})}else if(curScreen==2){$(".up-arrow").on("click",function(){offerPrice++;$("#price").html(offerPrice);$(".greyed").removeClass("greyed")});$(".down-arrow").on("click",function(){if(offerPrice>1){offerPrice--;$("#price").html(offerPrice);$(".greyed").removeClass("greyed")}});$(".accept").on("click",function(){console.log("Submit Offer @ ",offerPrice);$(this).addClass("greyed");w.wampMethods.submitOffer(offerPrice);offerPrice=1;$("#price").html(offerPrice)})}},typeLetter=function(e){if(e.length==1&&lettersTyped<3){if(lettersTyped==0){$("h1.signin").html($("h1.signin").text().slice(0,-3));$("h1.signin").append(e+"__");lettersTyped++}else if(lettersTyped==1){$("h1.signin").html($("h1.signin").text().slice(0,-2));$("h1.signin").append(e+"_");lettersTyped++}else if(lettersTyped==2){$("h1.signin").html($("h1.signin").text().slice(0,-1));$("h1.signin").append(e);lettersTyped++}}else if(e=="delete")if(lettersTyped==3){$("h1.signin").html($("h1.signin").text().slice(0,-1));$("h1.signin").append("_");lettersTyped--}else if(lettersTyped==2){$("h1.signin").html($("h1.signin").text().slice(0,-2));$("h1.signin").append("__");lettersTyped--}else if(lettersTyped==1){$("h1.signin").html($("h1.signin").text().slice(0,-3));$("h1.signin").append("___");lettersTyped--}else lettersTyped==0&&(lettersTyped=0);else if(e=="Submit")if(lettersTyped==0)console.log("Don't leave it blank!");else{lettersTyped==3?name=$("h1.signin").text():lettersTyped==2?name=$("h1.signin").text().slice(0,-1):lettersTyped==1&&(name=$("h1.signin").text().slice(0,-2));console.log("Name=",name);curScreen=0;changeScreen()}};